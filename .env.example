# CORS Configuration
# Comma-separated list of allowed origins for Cross-Origin Resource Sharing
# Example: http://localhost:3000,http://localhost:3001,https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:3000

# Database Configuration
# MongoDB Connection String
# Format: mongodb://[username:password@]host[:port]/database[?options]
# Local: mongodb://localhost:27017/todolist-backend
# Atlas: mongodb+srv://username:password@cluster.mongodb.net/todolist-backend
DATABASE_URL=mongodb://localhost:27017/todolist-backend

# JWT Authentication Configuration
# ⚠️  CRITICAL: JWT_SECRET is REQUIRED and must be set to a strong random secret!
# - Minimum 32 characters recommended
# - Use a cryptographically secure random string
# - Never commit the actual secret to version control
# - Application will fail to start if JWT_SECRET is not set
# Generate a secure secret with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=CHANGE_THIS_TO_A_STRONG_SECRET_MINIMUM_32_CHARACTERS

# JWT Refresh Token Secret (REQUIRED for refresh token functionality)
# ⚠️  CRITICAL: Must be different from JWT_SECRET!
# - Minimum 32 characters recommended
# - Use a cryptographically secure random string different from JWT_SECRET
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_REFRESH_SECRET=CHANGE_THIS_TO_A_DIFFERENT_STRONG_SECRET_MINIMUM_32_CHARACTERS

JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d

# Frontend URL (REQUIRED for email verification and password reset links)
# Used to generate callback URLs in email verification and password reset emails
# Development: http://localhost:3000
# Production: https://yourdomain.com
FRONTEND_URL=http://localhost:3000

# Email Service Configuration (REQUIRED for email functionality)
# SMTP configuration for sending emails (verification, password reset, notifications)
# Common SMTP providers:
# - Gmail: smtp.gmail.com:587 (requires app password: https://support.google.com/accounts/answer/185833)
# - SendGrid: smtp.sendgrid.net:587 (API key as password)
# - Mailgun: smtp.mailgun.org:587
# - AWS SES: email-smtp.region.amazonaws.com:587
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email sender information
EMAIL_FROM="todolist-backend <noreply@todolist-backend.com>"
SUPPORT_EMAIL=support@todolist-backend.com

# Redis Cache Configuration (Optional)
# If not set, will fall back to in-memory caching
# Format: redis://[username][:password]@host:port/database
# Encrypts sensitive fields (healthHistory, allergies, SSN, etc.) before storing in MongoDB
# Even if database is breached, encrypted fields are unreadable
#
# Choose one strategy based on your needs:
#
# STRATEGY 1: DISABLED (Default)
# ─────────────────────────────
# Cost: FREE
# Security: ❌ None
# Use for: Non-sensitive data, public information
# Config: ENCRYPTION_STRATEGY=disabled
#
# STRATEGY 2: LOCAL (Free Alternative)
# ─────────────────────────────────────
# Cost: FREE
# Security: ✅ AES-256-GCM (same cipher as AWS KMS)
# Use for: Small projects, internal tools, budget constraints
# Limitations: Manual key rotation, no audit trail
#
# Setup:
# 1. Generate master key: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 2. Set ENCRYPTION_STRATEGY=local
# 3. Set ENCRYPTION_MASTER_KEY=<generated-64-char-hex-key>
#
# STRATEGY 3: AWS_KMS (Enterprise-Grade) ⭐ RECOMMENDED FOR PRODUCTION
# ─────────────────────────────────────────────────────────────────────
# Cost: ~$7/month for 1 million records ($1/month key + $0.03 per 10K requests)
# Security: ✅✅✅ Bank-grade HSM, Automatic rotation, Audit logs
# Compliance: HIPAA, GDPR, PCI DSS certified
# Use for: Medical data, financial data, regulated industries
#
# Setup:
# 1. Create KMS key: https://console.aws.amazon.com/kms
# 2. Grant IAM permissions: kms:GenerateDataKey, kms:Decrypt
# 3. Enable automatic key rotation (recommended: every 90 days)
# 4. Set ENCRYPTION_STRATEGY=aws_kms
# 5. Set KMS_KEY_ID and AWS_REGION below
#
# ⚠️  WARNING: Changing strategies after data is encrypted requires migration!
# ⚠️  Keep old keys accessible for decryption even after rotation
#
# Choose your strategy:
ENCRYPTION_STRATEGY=disabled

# LOCAL Strategy Settings (only if ENCRYPTION_STRATEGY=local)
ENCRYPTION_MASTER_KEY=

# AWS KMS Strategy Settings (only if ENCRYPTION_STRATEGY=aws_kms)
KMS_KEY_ID=

